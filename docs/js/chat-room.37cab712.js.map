{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.reduce.js","webpack:///./node_modules/core-js/modules/es.string.trim.js","webpack:///./src/views/chat-room/Toolbar.vue?1e57","webpack:///./src/views/chat-room/Main.vue?6596","webpack:///./src/views/chat-room/Item.vue?dabe","webpack:///./src/views/chat-room/Editor.vue?63f5","webpack:///./node_modules/core-js/internals/string-trim-forced.js","webpack:///./src/common/sentences.js","webpack:///./src/views/chat-room/Main.vue?40fd","webpack:///./src/views/chat-room/Item.vue?e338","webpack:///src/views/chat-room/Item.vue","webpack:///./src/views/chat-room/Item.vue?e150","webpack:///./src/views/chat-room/Item.vue","webpack:///./src/views/chat-room/Editor.vue?d60d","webpack:///./src/common/user.js","webpack:///./src/views/chat-room/util.js","webpack:///src/views/chat-room/Editor.vue","webpack:///./src/views/chat-room/Editor.vue?ea45","webpack:///./src/views/chat-room/Editor.vue","webpack:///./src/views/chat-room/Toolbar.vue?d0d2","webpack:///src/views/chat-room/Toolbar.vue","webpack:///./src/views/chat-room/Toolbar.vue?70d9","webpack:///./src/views/chat-room/Toolbar.vue","webpack:///src/views/chat-room/Main.vue","webpack:///./src/views/chat-room/Main.vue?6004","webpack:///./src/views/chat-room/Main.vue?22db","webpack:///./node_modules/core-js/internals/array-reduce.js"],"names":["$","$reduce","left","arrayMethodIsStrict","arrayMethodUsesToLength","STRICT_METHOD","USES_TO_LENGTH","1","target","proto","forced","reduce","callbackfn","this","arguments","length","undefined","$trim","trim","forcedStringTrimMethod","fails","whitespaces","non","module","exports","METHOD_NAME","name","getSentences","min","max","sentences","sentenceArray","Random","pick","results","counts","integer","isMobile","push","join","sentence1","sentence2","sentence3","render","_vm","_h","$createElement","_c","_self","staticClass","directives","rawName","value","messages","expression","ref","class","overflow","attrs","messageComponent","addItemClass","on","onItemRendered","onTotop","slot","finished","_v","_m","sendRandomMessage","receivedRandomMessage","onSendMessage","staticRenderFns","creator","source","isCreator","user","avatar","_e","_s","content","props","type","Object","default","sid","images","component","placehoder","onKeydown","onInput","onPaste","disabled","disabledSend","$event","preventDefault","eventSend","eventClickMockReceived","eventClickMockSend","getRandomAvatar","sidCounter","maxCounts","genSid","genBody","getMessages","numbers","delay","Promise","resolve","setTimeout","body","getUser","getSids","map","message","LOAD_TYPES","EMPTY","PAGES","FEW","setLoadType","localStorage","setItem","e","console","error","getLoadType","getItem","send","Function","received","data","mounted","$refs","rich","focus","methods","keyCode","textContent","document","execCommand","plainText","innerHTML","$emit","eventClickEmpty","eventClickFew","eventClickPages","reload","window","location","components","Editor","Toolbar","Item","created","log","loadType","param","pageSize","isFirstPageReady","then","previousSize","vsl","getSizes","setVirtualListToBottom","checkOverFlow","$nextTick","getScrollSize","getClientSize","setVirtualListToIndex","scrollToIndex","index","setVirtualListToOffset","scrollToOffset","offset","scrollToBottom","aFunction","toObject","IndexedObject","toLength","createMethod","IS_RIGHT","that","argumentsLength","memo","O","self","i","TypeError","right"],"mappings":"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","file":"js/chat-room.37cab712.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar $reduce = require('../internals/array-reduce').left;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('reduce');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('reduce', { 1: 0 });\n\n// `Array.prototype.reduce` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.reduce\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || !USES_TO_LENGTH }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    return $reduce(this, callbackfn, arguments.length, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $trim = require('../internals/string-trim').trim;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\n// `String.prototype.trim` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.trim\n$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {\n  trim: function trim() {\n    return $trim(this);\n  }\n});\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Toolbar.vue?vue&type=style&index=0&id=a9d2ebea&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Toolbar.vue?vue&type=style&index=0&id=a9d2ebea&lang=less&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=style&index=0&lang=less&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Item.vue?vue&type=style&index=0&id=5b53987b&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Item.vue?vue&type=style&index=0&id=5b53987b&lang=less&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=style&index=0&id=0b52e006&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=style&index=0&id=0b52e006&lang=less&scoped=true&\"","var fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]() || non[METHOD_NAME]() != non || whitespaces[METHOD_NAME].name !== METHOD_NAME;\n  });\n};\n","import { Random } from './mock'\nimport { isMobile } from './ua'\n\n// retrun several random sentences\nexport default function getSentences (min = 1, max = 6) {\n  const sentences = sentenceArray[Random.pick([0, 1, 2])]\n  const results = []\n\n  let counts = Random.integer(min, isMobile ? 3 : max)\n  while (counts--) {\n    results.push(Random.pick(sentences))\n  }\n  return results.join('. ') + '.'\n}\n\n// Try Everything (From Zootopia)\nconst sentence1 = [\n  \"I messed up tonight I lost another fight\",\n  \"I still mess up but I'll just start again\",\n  \"I keep falling down I keep on hitting the ground\",\n  \"I always get up now to see what's next\",\n  \"Birds don't just fly they fall down and get up\",\n  \"Nobody learns without getting it won\",\n  \"I won't give up no I won't give in\",\n  \"Till I reach the end and then I'll start again\",\n  \"No I won't leave I wanna try everything\",\n  \"I wanna try even though I could fail\",\n  \"I won't give up no I won't give in\",\n  \"Till I reach the end and then I'll start again\",\n  \"No I won't leave I wanna try everything\",\n  \"I wanna try even though I could fail\",\n  \"Look at how far you've come you filled your heart with love\",\n  \"Baby you've done enough that cut your breath\",\n  \"Don't beat yourself up don't need to run so fast\",\n  \"Sometimes we come last but we did our best\",\n  \"I won't give up no I won't give in\",\n  \"Till I reach the end and then I'll start again\",\n  \"No I won't leave I wanna try everything\",\n  \"I wanna try even though I could fail\",\n  \"I won't give up no I won't give in\",\n  \"Till I reach the end and then I'll start again\",\n  \"No I won't leave I wanna try everything\",\n  \"I wanna try even though I could fail\",\n  \"I'll keep on making those new mistakes\",\n  \"I'll keep on making them every day\",\n  \"Those new mistakes\"\n]\n\n// Dream It Possible (From Delacey)\nconst sentence2 = [\n  \"I will run I will climb I will soar\",\n  \"I'm undefeated\",\n  \"Jumping out of my skin pull the chord\",\n  \"Yeah I believe it\",\n  \"The past is everything we were don't make us who we are\",\n  \"So I'll dream until I make it real and all I see is stars\",\n  \"It's not until you fall that you fly\",\n  \"When your dreams come alive you're unstoppable\",\n  \"Take a shot chase the sun find the beautiful\",\n  \"We will glow in the dark turning dust to gold\",\n  \"And we'll dream it possible\",\n  \"And we'll dream it possible\",\n  \"I will chase I will reach I will fly\",\n  \"Until I'm breaking until I'm breaking\",\n  \"Out of my cage like a bird in the night\",\n  \"I know I'm changing I know I'm changing\",\n  \"In into something big better than before\",\n  \"And if it takes takes a thousand lives\",\n  \"Then it's worth fighting for\",\n  \"It's not until you fall that you fly\",\n  \"When your dreams come alive you're unstoppable\",\n  \"Take a shot chase the sun find the beautiful\",\n  \"We will glow in the dark turning dust to gold\",\n  \"And we'll dream it possible\",\n  \"It possible\",\n  \"From the bottom to the top\",\n  \"We're sparking wild fire's\",\n  \"Never quit and never stop\",\n  \"The rest of our lives\",\n  \"From the bottom to the top\",\n  \"We're sparking wild fire's\",\n  \"Never quit and never stop\",\n  \"It's not until you fall that you fly\",\n  \"When your dreams come alive you're unstoppable\",\n  \"Take a shot chase the sun find the beautiful\",\n  \"We will glow in the dark turning dust to gold\",\n  \"And we'll dream it possible\",\n  \"And we'll dream it possible\"\n]\n\n// The Climb (From Miley Cyrus)\nconst sentence3 = [\n  \"I can almost see it\",\n  \"That dream I'm dreamin' but\",\n  \"There's a voice inside my head saying\",\n  \"You'll never reach it\",\n  \"Every step I'm taking\",\n  \"Every move I make feels\",\n  \"Lost with no direction\",\n  \"My faith is shakin\",\n  \"But I I gotta keep tryin\",\n  \"Gotta keep my head held high\",\n  \"There's always gonna be another mountain\",\n  \"I'm always gonna wanna make it move\",\n  \"Always gonna be an uphill battle\",\n  \"Sometimes I'm gonna have to lose\",\n  \"Ain't about how fast I get there\",\n  \"Ain't about what's waitin on the other side\",\n  \"It's the climb\",\n  \"The struggles I'm facing\",\n  \"The chances I'm taking\",\n  \"Sometimes might knock me down but\",\n  \"No I'm not breaking\",\n  \"I may not know it\",\n  \"But these are the moments that\",\n  \"I'm gonna remember most yeah\",\n  \"Just gotta keep going\",\n  \"And I I gotta be strong\",\n  \"Just keep pushing on 'cause\",\n  \"There's always gonna be another mountain\",\n  \"I'm always gonna wanna make it move\",\n  \"Always gonna be an uphill battle\",\n  \"But Sometimes I'm gonna have to lose\",\n  \"Ain't about how fast I get there\",\n  \"Ain't about what's waitin on the other side\",\n  \"It's the climb\",\n  \"Yeah-yeah\",\n  \"There's always gonna be another mountain\",\n  \"I'm always gonna wanna make it move\",\n  \"Always gonna be an uphill battle\",\n  \"Sometimes you're gonna have to lose\",\n  \"Ain't about how fast I get there\",\n  \"Ain't about what's waitin on the other side\",\n  \"It's the climb\",\n  \"Yeah-yeah-yea\",\n  \"Keep on moving\",\n  \"Keep climbing\",\n  \"Keep the faith\",\n  \"Baby It's all about\",\n  \"It's all about the climb\",\n  \"Keep your faith\",\n  \"Whoa O Whoa\"\n]\n\nconst sentenceArray = [\n  sentence1,\n  sentence2,\n  sentence3\n]\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"example\"},[_c('github-corner'),_c('tool-bar'),_c('div',{staticClass:\"main\"},[_c('div',{staticClass:\"list-container\"},[_c('virtual-list',{directives:[{name:\"show\",rawName:\"v-show\",value:(!!_vm.messages.length),expression:\"!!messages.length\"}],ref:\"vsl\",staticClass:\"stream scroll-touch\",class:{ overflow: _vm.overflow },attrs:{\"size\":80,\"keeps\":30,\"data-key\":'sid',\"data-sources\":_vm.messages,\"data-component\":_vm.messageComponent,\"item-class\":'stream-item',\"item-class-add\":_vm.addItemClass},on:{\"resized\":_vm.onItemRendered,\"totop\":_vm.onTotop}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.overflow),expression:\"overflow\"}],staticClass:\"header\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.finished),expression:\"!finished\"}],staticClass:\"spinner\"}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.finished),expression:\"finished\"}],staticClass:\"finished\"},[_vm._v(\"No more data\")])])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.messages.length),expression:\"!messages.length\"}],staticClass:\"empty\"},[_vm._m(0)])],1),_c('massage-eidtor',{attrs:{\"send\":_vm.sendRandomMessage,\"received\":_vm.receivedRandomMessage},on:{\"send\":_vm.onSendMessage}})],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrapper\"},[_c('div',{staticClass:\"icon\"}),_c('div',{staticClass:\"tips\"},[_vm._v(\"No chats\")])])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"item\",class:{ creator: _vm.source.isCreator }},[_c('div',{staticClass:\"avatar\"},[_c('img',{attrs:{\"src\":_vm.source.user.avatar}})]),_c('div',{staticClass:\"body\"},[(!_vm.source.isCreator)?_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.source.user.name))]):_vm._e(),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"text\"},[_vm._v(_vm._s(_vm.source.content))])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"item\" :class=\"{ creator: source.isCreator }\">\n    <div class=\"avatar\">\n      <img :src=\"source.user.avatar\" />\n    </div>\n    <div class=\"body\">\n      <div class=\"name\" v-if=\"!source.isCreator\">{{ source.user.name }}</div>\n      <div class=\"content\">\n        <div class=\"text\">{{ source.content }}</div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  name: 'chat-room-item',\n\n  props: {\n    source: {\n      type: Object,\n      default () {\n        return {\n          sid: '',\n          user: {},\n          content: '',\n          images: []\n        }\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.item {\n  display: flex;\n  .avatar {\n    width: 40px;\n    height: 40px;\n    border-radius: 50%;\n    background: rgba(255, 192, 203, .2);\n    @media (max-width: 640px) {\n      width: 30px;\n      height: 30px;\n    }\n    img {\n      display: block;\n      width: 100%;\n      height: 100%;\n      border-radius: 50%;\n    }\n  }\n  .body {\n    flex: 1;\n    padding-left: 1em;\n    font-size: 16px;\n    max-width: 560px;\n    word-break: break-word;\n    @media (max-width: 640px) {\n      font-size: 14px;\n      max-width: unset;\n    }\n    .name {\n      padding-bottom: .2em;\n      font-size: 12px;\n    }\n    .content {\n      position: relative;\n      color: #000;\n      background-color: aliceblue;\n      border-radius: 15px;\n      padding: .5em 1em;\n      @media (max-width: 640px) {\n        padding: .5em;\n      }\n      &:after{\n        content: '';\n        position: absolute;\n        right: 100%;\n        top: 10px;\n        width: 14px;\n        height: 14px;\n        border-width: 0;\n        border-style: solid;\n        border-color: transparent;\n        border-bottom-width: 10px;\n        border-bottom-color: currentColor;\n        border-radius: 0 0 0 32px;\n        color: aliceblue;\n      }\n    }\n  }\n  &.creator {\n    transform: rotateX(180deg);\n    direction: rtl;\n    align-items: flex-end;\n    .avatar {\n      transform: rotateX(180deg);\n    }\n    .body {\n      transform: rotate(180deg);\n    }\n    .text {\n      transform: rotateY(180deg);\n      direction: ltr;\n    }\n  }\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Item.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Item.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Item.vue?vue&type=template&id=5b53987b&scoped=true&\"\nimport script from \"./Item.vue?vue&type=script&lang=js&\"\nexport * from \"./Item.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Item.vue?vue&type=style&index=0&id=5b53987b&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5b53987b\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"editor\"},[_c('div',{ref:\"rich\",staticClass:\"rich\",attrs:{\"contenteditable\":\"true\",\"placehoder\":_vm.placehoder},on:{\"keydown\":_vm.onKeydown,\"input\":_vm.onInput,\"paste\":_vm.onPaste}}),_c('div',{staticClass:\"send\",class:{ disabled: _vm.disabledSend },on:{\"mousedown\":function($event){$event.preventDefault();},\"click\":_vm.eventSend}}),_c('img',{staticClass:\"author-avatar\",attrs:{\"src\":\"https://avatars1.githubusercontent.com/u/6846113\",\"alt\":\"preload-avatar\"}}),_c('div',{staticClass:\"auto\"},[_c('button',{staticClass:\"button button-clear item\",on:{\"mousedown\":function($event){$event.preventDefault();},\"click\":_vm.eventClickMockReceived}},[_vm._v(\"received one random\")]),_c('span',{staticClass:\"line\"},[_vm._v(\"|\")]),_c('button',{staticClass:\"button button-clear item\",on:{\"mousedown\":function($event){$event.preventDefault();},\"click\":_vm.eventClickMockSend}},[_vm._v(\"send one random\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { Random } from './mock'\n\nconst getRandomAvatar = () => {\n  return `https://avatars1.githubusercontent.com/u/${Random.integer(10000, 99999)}`\n}\n\nexport default () => {\n  return {\n    name: Random.name(),\n    avatar: getRandomAvatar()\n  }\n}\n","import { Random } from '../../common/mock'\nimport getSentences from '../../common/sentences'\nimport getUser from '../../common/user'\n\nlet sidCounter = 0\nconst maxCounts = 500\n\nexport function genSid () {\n  return `sid-${sidCounter++}`\n}\n\nexport function genBody () {\n  return {\n    user: {},\n    sid: '',\n    content: '',\n    images: [],\n    isCreator: false\n  }\n}\n\nexport function getMessages (numbers, delay) {\n  return new Promise((resolve) => {\n    if (sidCounter >= maxCounts) {\n      resolve([])\n      return\n    }\n\n    setTimeout(() => {\n      const messages = []\n      while (numbers--) {\n        let body = genBody()\n        body.user = getUser()\n        body.content = getSentences()\n        body.sid = genSid()\n        messages.push(body)\n      }\n\n      resolve(messages)\n    }, delay ? Random.pick([300, 500, 800]) : 0)\n  })\n}\n\nexport function getSids (messages) {\n  return messages.map((message) => message.sid)\n}\n\nexport const LOAD_TYPES = {\n  EMPTY: 'EMPTY',\n  PAGES: 'PAGES',\n  FEW: 'FEW'\n}\n\nexport function setLoadType (type) {\n  try {\n    localStorage.setItem('LOAD_TYPES', type)\n  } catch (e) {\n    console.error(e)\n  }\n}\n\nexport function getLoadType () {\n  try {\n    return localStorage.getItem('LOAD_TYPES')\n  } catch (e) {\n    console.error(e)\n    return LOAD_TYPES.EMPTY\n  }\n}\n","<template>\n  <div class=\"editor\">\n    <div\n      ref=\"rich\"\n      class=\"rich\"\n      contenteditable=\"true\"\n      :placehoder=\"placehoder\"\n      @keydown=\"onKeydown\"\n      @input=\"onInput\"\n      @paste=\"onPaste\"\n    ></div>\n    <div class=\"send\" :class=\"{ disabled: disabledSend }\" @mousedown.prevent @click=\"eventSend\"></div>\n    <img class=\"author-avatar\" src=\"https://avatars1.githubusercontent.com/u/6846113\" alt=\"preload-avatar\">\n    <div class=\"auto\">\n      <button @mousedown.prevent @click=\"eventClickMockReceived\" class=\"button button-clear item\">received one random</button>\n      <span class=\"line\">|</span>\n      <button @mousedown.prevent @click=\"eventClickMockSend\" class=\"button button-clear item\">send one random</button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { isMobile } from '../../common/ua'\nimport { genBody, genSid } from './util'\n\nconst genMessage = (content) => {\n  let body = genBody()\n  body.user = {\n    name: 'tangbc',\n    avatar: 'https://avatars1.githubusercontent.com/u/6846113'\n  }\n  body.sid = genSid(),\n  body.content = content\n  body.isCreator = true\n  return body\n}\n\nexport default {\n  name: 'editor',\n\n  props: {\n    send: {\n      type: Function\n    },\n    received: {\n      type: Function\n    }\n  },\n\n  data () {\n    return {\n      disabledSend: true,\n      placehoder: isMobile ? 'Input message here' : 'Input message here and press enter to send'\n    }\n  },\n\n  mounted () {\n    if (this.$refs.rich) {\n      this.$refs.rich.focus()\n    }\n  },\n\n  methods: {\n    onKeydown (e) {\n      if (e.keyCode === 13) {\n        this.eventSend()\n        e.preventDefault()\n      }\n    },\n\n    onInput () {\n      if (this.$refs.rich) {\n        this.disabledSend = !(this.$refs.rich.textContent || '').trim('')\n      }\n    },\n\n    onPaste (e) {\n      e.preventDefault()\n      const plainText = (e.originalEvent || e).clipboardData.getData('text/plain')\n      document.execCommand(\"insertText\", false, plainText)\n    },\n\n    eventSend () {\n      if (this.$refs.rich && !this.disabledSend) {\n        const content = (this.$refs.rich.textContent || '').trim()\n        const message = genMessage(content)\n        this.$refs.rich.innerHTML = ''\n        this.$emit('send', message)\n      }\n    },\n\n    eventClickMockReceived () {\n      this.received()\n    },\n\n    eventClickMockSend () {\n      this.send(genMessage(''))\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.editor {\n  position: relative;\n}\n.rich {\n  border: 2px solid;\n  border-color: dimgray;\n  border-top: none;\n  width: 100%;\n  padding: 1em 4em 1em 1em;\n  outline: none;\n  cursor: text;\n  background-color: #fffaf0;\n  &:empty::before{\n    color: darkgray;\n    content: attr(placehoder);\n  }\n}\n.send {\n  position: absolute;\n  right: 20px;\n  top: 15px;\n  width: 33px;\n  height: 30px;\n  cursor: pointer;\n  background-size: cover;\n  background-image: url(\"data:image/svg+xml,%3Csvg t='1587742943994' class='icon' viewBox='0 0 1024 1024' version='1.1' xmlns='http://www.w3.org/2000/svg' p-id='3418' width='200' height='200'%3E%3Cpath d='M0 561.6l366.4 100.8 400-356.8-304 401.6 363.2 107.2L1024 46.4zM460.8 977.6l126.4-192-126.4-25.6z' p-id='3419' fill='%239b4dca'%3E%3C/path%3E%3C/svg%3E\");\n  &:active {\n    opacity: .7;\n  }\n  &.disabled {\n    opacity: .3;\n    pointer-events: none;\n  }\n}\n.author-avatar {\n  display: none;\n}\n.item {\n  padding: 0;\n}\n.line {\n  font-size: 12px;\n  margin: 0 1em;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Editor.vue?vue&type=template&id=0b52e006&scoped=true&\"\nimport script from \"./Editor.vue?vue&type=script&lang=js&\"\nexport * from \"./Editor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Editor.vue?vue&type=style&index=0&id=0b52e006&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0b52e006\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"toolbar\"},[_c('button',{staticClass:\"button button-clear item\",on:{\"click\":_vm.eventClickEmpty}},[_vm._v(\"reload with empty\")]),_c('span',{staticClass:\"line\"},[_vm._v(\"|\")]),_c('button',{staticClass:\"button button-clear item\",on:{\"click\":_vm.eventClickFew}},[_vm._v(\"reload with few\")]),_c('span',{staticClass:\"line\"},[_vm._v(\"|\")]),_c('button',{staticClass:\"button button-clear item\",on:{\"click\":_vm.eventClickPages}},[_vm._v(\"reload with pages\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"toolbar\">\n    <button @click=\"eventClickEmpty\" class=\"button button-clear item\">reload with empty</button>\n    <span class=\"line\">|</span>\n    <button @click=\"eventClickFew\" class=\"button button-clear item\">reload with few</button>\n    <span class=\"line\">|</span>\n    <button @click=\"eventClickPages\" class=\"button button-clear item\">reload with pages</button>\n  </div>\n</template>\n\n<script>\nimport { LOAD_TYPES, setLoadType } from './util'\n\nexport default {\n  name: 'tool-bar',\n\n  methods: {\n    eventClickEmpty () {\n      setLoadType(LOAD_TYPES.EMPTY)\n      this.reload()\n    },\n\n    eventClickPages () {\n      setLoadType(LOAD_TYPES.PAGES)\n      this.reload()\n    },\n\n    eventClickFew () {\n      setLoadType(LOAD_TYPES.FEW)\n      this.reload()\n    },\n\n    reload () {\n      window.location.reload()\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.toolbar {\n  @media (max-width: 640px) {\n    width: 100%;\n    white-space: nowrap;\n    overflow-x: auto;\n  }\n  .item {\n    padding: 0;\n  }\n  .line {\n    margin: 0 1em;\n    font-size: 12px;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Toolbar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Toolbar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Toolbar.vue?vue&type=template&id=a9d2ebea&scoped=true&\"\nimport script from \"./Toolbar.vue?vue&type=script&lang=js&\"\nexport * from \"./Toolbar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Toolbar.vue?vue&type=style&index=0&id=a9d2ebea&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a9d2ebea\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"example\">\n    <github-corner />\n\n    <tool-bar />\n\n    <div class=\"main\">\n      <div class=\"list-container\">\n        <virtual-list v-show=\"!!messages.length\" class=\"stream scroll-touch\" :class=\"{ overflow: overflow }\" ref=\"vsl\"\n          :size=\"80\"\n          :keeps=\"30\"\n          :data-key=\"'sid'\"\n          :data-sources=\"messages\"\n          :data-component=\"messageComponent\"\n          :item-class=\"'stream-item'\"\n          :item-class-add=\"addItemClass\"\n          @resized=\"onItemRendered\"\n          @totop=\"onTotop\"\n        >\n          <div slot=\"header\" v-show=\"overflow\" class=\"header\">\n            <div class=\"spinner\" v-show=\"!finished\"></div>\n            <div class=\"finished\" v-show=\"finished\">No more data</div>\n          </div>\n        </virtual-list>\n        <div class=\"empty\" v-show=\"!messages.length\">\n          <div class=\"wrapper\">\n            <div class=\"icon\"></div>\n            <div class=\"tips\">No chats</div>\n          </div>\n        </div>\n      </div>\n      <massage-eidtor @send=\"onSendMessage\" :send=\"sendRandomMessage\" :received=\"receivedRandomMessage\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport Item from './Item'\nimport Editor from './Editor'\nimport Toolbar from './Toolbar'\nimport getSentences from '../../common/sentences'\nimport { getMessages, getSids, LOAD_TYPES, getLoadType } from './util'\n\nexport default {\n  name: 'chat-room',\n\n  components: {\n    'massage-eidtor': Editor,\n    'tool-bar': Toolbar\n  },\n\n  data () {\n    return {\n      finished: false,\n      messages: [],\n      messageComponent: Item,\n      overflow: false\n    }\n  },\n\n  created () {\n    const loadType = getLoadType()\n    console.log('loadType: ', loadType)\n\n    this.param = {\n      pageSize: loadType === LOAD_TYPES.FEW ? 2 : 10,\n      isFirstPageReady: false,\n    }\n\n    this.finished = loadType !== LOAD_TYPES.PAGES\n\n    if (loadType !== LOAD_TYPES.EMPTY) {\n      // first page request\n      getMessages(this.param.pageSize).then((messages) => {\n        this.messages = this.messages.concat(messages)\n      })\n    }\n  },\n\n  // mounted () {\n  //   window.vsl = this.$refs.vsl\n  // },\n\n  methods: {\n    onTotop () {\n      // only page type has paging\n      if (getLoadType() !== LOAD_TYPES.PAGES) {\n        return\n      }\n\n      // get next page\n      getMessages(this.param.pageSize, true).then((messages) => {\n        if (!messages.length) {\n          this.finished = true\n          return\n        }\n\n        this.setVirtualListToOffset(1)\n\n        const sids = getSids(messages)\n        this.messages = messages.concat(this.messages)\n        this.$nextTick(() => {\n          const vsl = this.$refs.vsl\n          const offset = sids.reduce((previousValue, currentSid) => {\n            const previousSize = typeof previousValue === 'string' ? vsl.getSize(previousValue) : previousValue\n            return previousSize + this.$refs.vsl.getSize(currentSid)\n          })\n          this.setVirtualListToOffset(offset)\n        })\n      })\n    },\n\n    onItemRendered () {\n      if (!this.$refs.vsl) {\n        return\n      }\n\n      // first page items are all mounted, scroll to bottom\n      if (!this.param.isFirstPageReady && this.$refs.vsl.getSizes() >= this.param.pageSize) {\n        this.param.isFirstPageReady = true\n        this.setVirtualListToBottom()\n      }\n\n      this.checkOverFlow()\n    },\n\n    onSendMessage (message) {\n      this.messages.push(message)\n      this.$nextTick(() => {\n        this.setVirtualListToBottom()\n      })\n    },\n\n    // update item wrapper class dynamic\n    addItemClass (index) {\n      return (this.messages[index] && this.messages[index].isCreator) ? 'creator' : ''\n    },\n\n    checkOverFlow () {\n      const vsl = this.$refs.vsl\n      if (vsl) {\n        this.overflow = vsl.getScrollSize() > vsl.getClientSize()\n      }\n    },\n\n    // mock received message\n    receivedRandomMessage () {\n      getMessages(1).then((messages) => {\n        this.messages = this.messages.concat(messages)\n        this.$nextTick(() => {\n          this.setVirtualListToBottom()\n        })\n      })\n    },\n\n    // mock send message\n    sendRandomMessage (message) {\n      message.content = getSentences()\n      this.onSendMessage(message)\n    },\n\n    setVirtualListToIndex (index) {\n      if (this.$refs.vsl) {\n        this.$refs.vsl.scrollToIndex(index)\n      }\n    },\n\n    setVirtualListToOffset (offset) {\n      if (this.$refs.vsl) {\n        this.$refs.vsl.scrollToOffset(offset)\n      }\n    },\n\n    setVirtualListToBottom () {\n      if (this.$refs.vsl) {\n        this.$refs.vsl.scrollToBottom()\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"less\">\n.main {\n  margin-top: 1em;\n}\n.stream, .empty {\n  position: relative;\n  width: 100%;\n  height: 500px;\n  border: 2px solid;\n  border-bottom: none;\n  overflow-y: auto;\n  border-color: dimgray;\n  display: flex;\n  flex-direction: column-reverse;\n  @media (max-width: 640px) {\n    height: 430px;\n  }\n  &.overflow {\n    flex-direction: column;\n  }\n  .stream-item {\n    display: flex;\n    align-items: center;\n    padding: 1em;\n    @media (max-width: 640px) {\n      padding: .5em;\n    }\n    &.creator {\n      flex-direction: row-reverse;\n    }\n  }\n}\n.empty {\n  .wrapper {\n    position: absolute;\n    left: 0;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    color: #bfbfbf;\n  }\n  .icon {\n    width: 70px;\n    height: 70px;\n    background-size: cover;\n    background-image: url(\"data:image/svg+xml,%3Csvg t='1587779561352' class='icon' viewBox='0 0 1024 1024' version='1.1' xmlns='http://www.w3.org/2000/svg' p-id='1970' width='200' height='200'%3E%3Cpath d='M915.90919 428.28025l40.909735 6.785543 1.77339-10.488889 8.708336-12.93766-103.649662-69.574588-7.776104-5.219885-7.837502-2.918469L552.61093 223.932142l-6.92676-2.579755-6.962575 2.308579-347.57209 115.214045-8.804527 2.14792-5.704932 4.046153L53.550637 432.126858l9.832949 13.854543 4.493338 11.238972 39.739073-16.353456L75.734892 485.09114l96.368838 54.05001 0.107447 199.534476-2.349511 4.28356 2.352581 1.310855 0.001023 2.709715 4.859681 0 281.95872 157.194158 7.696286 4.260024 2.344395 1.277086 2.635013 1.726318 9.41851-3.080152 8.748245-3.419889 388.69979-159.572322 0.031722-9.44307L878.607632 546.373879l92.490507-35.759435L915.90919 428.28025zM561.218982 260.057921l245.843174 91.538833-245.843174 92.115977L561.218982 260.057921zM121.002888 475.127208l40.684608-56.45171 5.983271-8.358365 23.439852-32.558533 262.998903 123.622552L411.290297 637.993552 121.002888 475.127208zM203.051579 726.133985l-0.100284-169.629375 226.371704 126.989229 28.646434-91.38636 0.893346 276.69688L203.051579 726.133985zM473.818399 476.500485 225.704508 359.870184l304.674071-100.980879 0 196.376553L473.818399 476.500485zM847.766207 724.616422 489.771743 871.571379l-0.955768-301.186643 45.281299 109.166305 313.667909-121.215736L847.765183 724.616422zM551.061644 639.889739l-57.241702-137.940652 347.098299-130.082684 83.064834 123.892705L551.061644 639.889739z' p-id='1971' fill='%23bfbfbf'%3E%3C/path%3E%3C/svg%3E\");\n  }\n}\n.header {\n  padding: .5em;\n  .finished {\n    font-size: 14px;\n    text-align: center;\n    color: #bfbfbf;\n  }\n  .spinner {\n    font-size: 10px;\n    margin: 0px auto;\n    text-indent: -9999em;\n    width: 15px;\n    height: 15px;\n    border-radius: 50%;\n    background: #ffffff;\n    background: linear-gradient(to right, #ccc 10%, rgba(255, 255, 255, 0) 42%);\n    position: relative;\n    animation: load3 1.4s infinite linear;\n    transform: translateZ(0);\n  }\n  .spinner:before {\n    width: 50%;\n    height: 50%;\n    background: #ccc;\n    border-radius: 100% 0 0 0;\n    position: absolute;\n    top: 0;\n    left: 0;\n    content: '';\n  }\n  .spinner:after {\n    background: #ffffff;\n    width: 75%;\n    height: 75%;\n    border-radius: 50%;\n    content: '';\n    margin: auto;\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n  }\n  @-webkit-keyframes load3 {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n  @keyframes load3 {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Main.vue?vue&type=template&id=7b4e5f1c&\"\nimport script from \"./Main.vue?vue&type=script&lang=js&\"\nexport * from \"./Main.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Main.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var aFunction = require('../internals/a-function');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\nvar toLength = require('../internals/to-length');\n\n// `Array.prototype.{ reduce, reduceRight }` methods implementation\nvar createMethod = function (IS_RIGHT) {\n  return function (that, callbackfn, argumentsLength, memo) {\n    aFunction(callbackfn);\n    var O = toObject(that);\n    var self = IndexedObject(O);\n    var length = toLength(O.length);\n    var index = IS_RIGHT ? length - 1 : 0;\n    var i = IS_RIGHT ? -1 : 1;\n    if (argumentsLength < 2) while (true) {\n      if (index in self) {\n        memo = self[index];\n        index += i;\n        break;\n      }\n      index += i;\n      if (IS_RIGHT ? index < 0 : length <= index) {\n        throw TypeError('Reduce of empty array with no initial value');\n      }\n    }\n    for (;IS_RIGHT ? index >= 0 : length > index; index += i) if (index in self) {\n      memo = callbackfn(memo, self[index], index, O);\n    }\n    return memo;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.reduce` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.reduce\n  left: createMethod(false),\n  // `Array.prototype.reduceRight` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.reduceright\n  right: createMethod(true)\n};\n"],"sourceRoot":""}